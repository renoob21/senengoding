---
import CodeHL from "./CodeHL.astro";

interface Props {
    title:string;
    code: string;
    lang:string;
}

const {code, lang, title} = Astro.props;
---

<div>
    <button data-open-modal>Buka <span class="italic">Code</span></button>
    <dialog class="rounded-xl w-1/2">
        <div><p class="text-lg font-bold">{title}</p></div>
        <CodeHL
         code={code}
         lang={lang}
         />
        <button data-close-modal>Tutup</button>
    </dialog>
</div>

<script>
    const dialog = document.querySelector("dialog");
    const openButton = document.querySelector("[data-open-modal]");
    const closeButton = document.querySelector("[data-close-modal]");

    openButton?.addEventListener("click", () => {
        dialog?.showModal()
    })

    closeButton?.addEventListener("click", () => {
        dialog?.close()
    })
</script>

<style>
    [data-open-modal], [data-close-modal] {
        @apply rounded-lg bg-gray-700 p-2 text-gray-50 h-fit
    }

    dialog::backdrop {
        @apply bg-gray-900 opacity-25
    }
</style>